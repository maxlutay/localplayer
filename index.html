<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>localplayer</title>
<style>

* {
  margin: 0;         
  padding: 0;
  border: 0;
  outline: 0;
  overflow: hidden;
  box-sizing: border-box;
}

 
.app{
  height:100vh;
  width:100vw;
  background: #fff;
}


:root {
  --vsmaller: min(1vh,1vw);
  --player_interface_background: #fff;
  --player_interface_text_color: #000;
}



.playing_interface{
  heigth: 100vh;
  width: 99vw;

  min-height: 100vh;

  position: absolute;
  left: 0.5vw;
  top: 0.5vh;
  
  --border-radius-value: calc(10*var(--vsmaller)) ;
  border-radius: var(--border-radius-value) var(--border-radius-value)  0 0 ;/**/
  overflow: hidden;

  border: 1px solid var(--player_interface_text_color);
  background: var(--player_interface_background);
  color: var(--player_interface_text_color);
  
  z-index: 0;

  display: block;
}



.playing_interface.minimized{
  transform: translateY(70vh);
}

.playing_interface.full{
  top: translateY(0);
}

.playing_interface--utility-no_border_radius{
  height: 100%;
  width: 100%;

  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;

  padding: 1vh 1vw 1vh 1vw;


  isolation: isolate;

  background: inherit;
  color: inherit;

  position: absolute;
}

.playing_interface .no_border_radius * {
  z-index:6;
}

:root {
  --spacer_height: 6vh;

}

.top_spacer{
  height:var(--spacer_height);
  
  display: flex;
  justify-content: center;
  align-items: center;

}


.top_spacer__pin {
  background: var(--player_interface_text_color);

  --pin_height: calc(var(--spacer_height) / 8);

  height: var(--pin_height);
  border-radius: calc(var(--pin_height) / 2);

  width: 20%;
}

.current_track_info{
  width: 100%;
  height: 8vh;
  overflow-x: hidden;

  position: relative;
  top: 0;
  left: 0;

  background: #fff;

  mix-blend-mode: exclusion;
  filter: invert(1);

  

  z-index: 10;

  border:  1px solid #00f;
}

.full .current_track_info {

}

.current_track_info__utility_line{
  height: 100%;
  width: min-content;
  min-width: 100%;

  background: inherit;
  color: inherit;

  
  border:  1px dotted #f00;

  position: absolute;
  top:  0;
  left: 0;

  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: center;
  flex-wrap: nowrap;

  white-space: nowrap;

  animation: 8s linear infinite alternate track_info_scroll;
  
}

@keyframes track_info_scroll {
  
  0%, 50% {
    transform: translateX(1%);
    left: 0%;
  }
  
  90%, 100%{
    transform: translateX(-101%);
    left: 99%;
  }

}

.current_track_info__utility_line * {
  display: inline-block;
  white-space: nowrap;
  overflow: visible;
  width: min-content;
  padding:0 1vw 0 1vw;

  pointer-events: none;
}


.progress_bar{
  display:flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  position: absolute;
  height: calc( 100% - var(--spacer_height));
  width: 100%;
  top: var(--spacer_height);
  left: 0;
  
  z-index: 5;

  --play_progress: 20%;
  --load_progress: 65%;
}

.full  .progress_bar{
  position: relative;
  top: inherit;
  
  height: 30vh;
}


.progress_bar *{
    border-radius: 1vw;
    overflow: hidden;
}

.progress_max {
  height: 100%;
  width: 100%;

  position: relative;

  z-index: 4;

  background: #efe;


  animation: 10s linear infinite progress_filter_hue;

}

.full .progress_max {
  transform: translate( calc(50% - var(--play_progress)) );
}

.progress_play {
  position: absolute;
  left: var(--play_progress);

  width: calc( var(--load_progress) 
- var(--play_progress) );
  height: 100%;

  border-radius: 0 0.5vh 0.5vh 0;
  border-left:  2px solid #000;
  /*background: #808080;*/
  background: #fee;

  z-index:5;

  animation: 10s linear infinite  progress_filter_hue;

  
}

@keyframes progress_filter_hue {
  0%, 3%, 97%, 100% {
    /*background: magenta;*/
    filter: hue-rotate(0deg);
  }
  30%, 36% {
    /*background: yellow;*/
    filter: hue-rotate(120deg);
  }
  64%, 70% {
    /*background: cyan;*/
    filter: hue-rotate(240deg);
  }
}

.full .progress_play {
}

.progress_load {
  position: absolute;
  right: 0;

  width: calc(100% - var(--load_progress) );
  height: 100%;

  border-radius: 0.5vh;
  background: repeating-linear-gradient(-45deg,  #fee 0% 3%, transparent 3% 4%); 
  

  /*mix-blend-mode: exclusion;*/
  z-index:5;

  /*animation: 5s linear infinite load_filter;*/
  animation: 10s linear infinite progress_filter_hue;
}

@keyframes load_filter {
  0%, 49%{
    filter: invert(1);
  }
  50%,100% {
    filter: invert(0);
  }
}
   

</style>
</head>

<body>
<div class="app">
  <div class="header">h</div><!--.header-->
  <div class="feed">f</div><!--.feed-->
  <div class="playing_interface minimized">
   <div class="playing_interface--utility-no_border_radius"><!-- this fixing  mix-blend-mode and parent border-radius bug -->
    <div class="top_spacer">
      <div class="top_spacer__pin"></div>
    </div><!--.top_spacer-->
    <div class="current_track_info">
      <div class="current_track_info__utility_line">
        <div class="track_name">Some Long Track Name </div>-
        <div class="track_performer"> Some famous performer</div> 
        <div class="track_album">(some long name album)</div> 
      </div>
    </div><!--.current_track_info-->
    <div class="progress_bar">
      <div class="progress_max">
        <div class="progress_play"></div> 
        <div class="progress_load"></div>
      </div>
    </div><!--.progress_bar-->
   </div>
  </div><!--.player_interface-->


</div><!-- app-->

<script>

const qs = document.querySelector.bind(document);

const playing_interface = qs(".playing_interface");

const interface_toggler_button = qs(".top_spacer");


interface_toggler_button.addEventListener("pointerenter",e=>{
  e.stopPropagation();
  playing_interface. classList.toggle("minimized");
  playing_interface. classList.toggle("full");
});

interface_toggler_button.addEventListener("pointerout",e=>e.stopPropagation());

playing_interface.addEventListener("pointerout",e=>{
  e.stopPropagation();
  playing_interface. classList.remove("minimized");
  playing_interface. classList.add("full");
});

</script>

</body>
</html>
